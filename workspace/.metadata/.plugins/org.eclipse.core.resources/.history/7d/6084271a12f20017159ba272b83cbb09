package gui_control.WirelessConnection;

import java.io.IOException;
import java.util.ArrayList;

import javax.bluetooth.BluetoothStateException;
import javax.bluetooth.DiscoveryAgent;
import javax.bluetooth.LocalDevice;
import javax.bluetooth.RemoteDevice;

import gui_control.WirelessModel.WirelessConnectionModel;

public class WirelessConnection {
	RemoteDevice [] remoteDevices;
	LocalDevice localDevice;
	
	
	
	public WirelessConnection(){
		
	}



	public void searchForDevices() throws IOException{
		localDevice = LocalDevice.getLocalDevice();
		remoteDevices = localDevice.getDiscoveryAgent().retrieveDevices(DiscoveryAgent.PREKNOWN);
		
		for(RemoteDevice r: remoteDevices){
			System.out.println(r.getFriendlyName(false));
			System.out.println(r.getBluetoothAddress());
		}
	}



	public RemoteDevice[] getRemoteDevices() {
		return remoteDevices;
	}



	public void setRemoteDevices(RemoteDevice[] remoteDevices) {
		this.remoteDevices = remoteDevices;
	}
	
	public ArrayList<WirelessConnectionModel> getWirelessConnectionModels(){
		ArrayList<WirelessConnectionModel> result = new ArrayList<WirelessConnectionModel>();
		for(RemoteDevice r: remoteDevices){
			WirelessConnectionModel m = new WirelessConnectionModel(r.getFriendlyName(false),r.getBluetoothAddress());
			
			result.add(m);
		}
		
		return result;
	}



	public LocalDevice getLocalDevice() {
		return localDevice;
	}



	public void setLocalDevice(LocalDevice localDevice) {
		this.localDevice = localDevice;
	}
	
	
}
