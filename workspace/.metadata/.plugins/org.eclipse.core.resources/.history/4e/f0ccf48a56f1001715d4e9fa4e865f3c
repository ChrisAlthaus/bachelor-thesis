package gui_control.EditorView;

import java.io.IOException;
import java.util.ArrayList;
import java.util.Date;

import gui_control.Main;
import gui_control.ScenarioModel.ScenarioModel;
import gui_control.SettingRequestView.SettingRequestController;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.event.EventHandler;
import javafx.fxml.FXML;
import javafx.fxml.FXMLLoader;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.TableColumn;
import javafx.scene.control.TableView;
import javafx.scene.control.cell.PropertyValueFactory;
import javafx.scene.input.MouseButton;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.BorderPane;
import javafx.stage.Modality;
import javafx.stage.Stage;

public class EditorController {
	  	@FXML
	    private TableView<ScenarioModel> scenarioTableView;
	  	
	  	 @FXML
	     private TableColumn<ScenarioModel, String> scenarioNameColumn;

	     @FXML
	     private TableColumn<ScenarioModel, Date> scenarioDateColumn;

	    @FXML
	    private Button addButton;

	    @FXML
	    private Button deleteButton;
	    
	    ObservableList<ScenarioModel> scenarios = FXCollections.observableArrayList();
		
		
		public EditorController(ArrayList<ScenarioModel> scenarios) {
			this.scenarios = FXCollections.observableArrayList(scenarios);
		}
		
		public EditorController() {
			
		}
		
		public void setScenarioList(ArrayList<ScenarioModel> scenarios){
			this.scenarios = FXCollections.observableArrayList(scenarios);
		}

		public void initialize(){
			
			scenarioTableView.setItems(scenarios);
			
			scenarioNameColumn.setCellValueFactory(new PropertyValueFactory<>("name"));
			scenarioDateColumn.setCellValueFactory(new PropertyValueFactory<>("creationDate"));
			
			
		}
		
		public void addScenario() throws IOException{
			SettingRequestController controller = new SettingRequestController(this.scenarios);
			
			FXMLLoader loader = new FXMLLoader();
			loader.setLocation(Main.class.getResource("SettingRequestView/SettingRequestView.fxml"));
			loader.setController(controller);
			
			BorderPane builderView = loader.load();
			
			
			
			
			
			Stage builderStage = new Stage();
			builderStage.setTitle("Scenario Builder");
			builderStage.initModality(Modality.NONE);
			
			
			Scene scene = new Scene(builderView);
			builderStage.setScene(scene);
			builderStage.showAndWait();
		}
}
